<!DOCTYPE HTML>
<html lang="it" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Informatica - Quinto anno - Materiale didattico</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="01-chapter_1.html"><strong aria-hidden="true">1.</strong> Introduzione ai database</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="02-cheat_sheet.html"><strong aria-hidden="true">1.1.</strong> Cheat Sheet</a></li><li class="chapter-item expanded "><a href="03-relationships.html"><strong aria-hidden="true">1.2.</strong> Relazioni</a></li><li class="chapter-item expanded "><a href="04-requirements.html"><strong aria-hidden="true">1.3.</strong> Raccolta dei requisiti</a></li><li class="chapter-item expanded "><a href="05-er_model.html"><strong aria-hidden="true">1.4.</strong> Schema concettuale</a></li><li class="chapter-item expanded "><a href="06-logic.html"><strong aria-hidden="true">1.5.</strong> Schema logico</a></li></ol></li><li class="chapter-item expanded "><a href="10-mvc.html"><strong aria-hidden="true">2.</strong> MVC</a></li><li class="chapter-item expanded "><a href="10-rest.html"><strong aria-hidden="true">3.</strong> REST API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="10-rest-op.html"><strong aria-hidden="true">3.1.</strong> Operazioni REST</a></li><li class="chapter-item expanded "><a href="10-tools.html"><strong aria-hidden="true">3.2.</strong> Tools</a></li></ol></li><li class="chapter-item expanded "><a href="20-README.html"><strong aria-hidden="true">4.</strong> Cloud</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="20-tutorial.html"><strong aria-hidden="true">4.1.</strong> Cloud tutorial</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Informatica - Quinto anno - Materiale didattico</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/wbigger/book-cs-5y-2021.git" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduzione-ai-database"><a class="header" href="#introduzione-ai-database">Introduzione ai database</a></h1>
<p>Come abbiamo visto gli anni precedenti, in qualsiasi sistema di elaborazione trattiamo, sia esso hardware, software o una combinazione dei due, possiamo sempre individuare due componenti distinti con ruoli differenti:</p>
<ol>
<li>conservazione dei dati</li>
<li>manipolazione dei dati</li>
</ol>
<p>Nell'arco dei precedenti due anni, abbiamo trattato diversi casi. Di seguito una tabella che li riassume, insieme a quello che andremo a trattare in particolare quest'anno, il web.</p>
<table><thead><tr><th></th><th>Hardware</th><th>Sistema Operativo</th><th>Applicazione</th><th>Web</th></tr></thead><tbody>
<tr><td>Dati</td><td>RAM/Hard Disk</td><td>files, database</td><td>strutture dati</td><td>database server</td></tr>
<tr><td>Manipolazione</td><td>CPU</td><td>processi, applicazioni</td><td>funzioni</td><td>application server, clients</td></tr>
</tbody></table>
<h1 id="dbms"><a class="header" href="#dbms">DBMS</a></h1>
<p>Al cuore di ogni azienda, ci sono i dati che l'azienda tratta e che sono sempre una parte fondamentale del loro business. Questi dati possono riguardare i clienti dell'azienda, i propri prodotti, i fornitori o tutte queste cose insieme. Tutti questi dati formano il <strong>sistema informativo</strong> dell'azienda.</p>
<p>Da molti anni ormai questi dati sono trattati da un <strong>sistema informatico</strong>, che permette di poterli scrivere, leggere, analizzare, in generale manipolare in modo molto veloce. L'insieme dei dati di per sé viene chiamato <strong>database</strong> (abbreviato <strong>DB</strong>). Per trattare in modo efficiente, efficace e sicuro i DB sono nati dei <em>software</em> specifici dedicati alla gestione di questi dati, che vengono chiamati quindi <strong>Database Management System (DBMS)</strong>. </p>
<p>Il DBMS fa da ponte tra i dati, che fisicamente vengono salvati in un supporto <em>persistente</em> (tipicamente dei file su un hard-disk) e l'utente. </p>
<!-- DB01 (DBMS) -->
<p class="center">
<img src="data:image/png;base64,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" style="max-width:100%;" />
</p>
<p>Il DBMS che useremo in queste lezioni si chiama <a href="https://mariadb.org/">MariaDB</a>, è completamente open source e mantenuto dalla MariaDB foundation. MariaDB è un fork di MySQL ed i comandi sono perfettamente compatibili con MySQL.</p>
<img src="assets/mariadb-logo.png" />
<blockquote>
<p>Da <a href="https://it.wikipedia.org/wiki/MariaDB#Storia">Wikipedia</a>: <em>MariaDB è nato nel 2009 come fork di MySQL. L'ideatore e responsabile del progetto è Michael &quot;Monty&quot; Widenius, il programmatore finlandese che ha iniziato e guidato per molti anni MySQL. Quando, all'inizio del 2008, la Sun Microsystems ha acquistato MySQL AB, Widenius si è trovato a disagio nella nuova situazione lavorativa, criticando[1] la gestione dello sviluppo della versione 5.1 di MySQL.</em></p>
</blockquote>
<blockquote>
<p>Altri DBMS molto diffusi sono: PostgreSQL, SQLite, MongoDB, Redis.</p>
</blockquote>
<p>L'organizzazione dei file sull'hard-disk viene chiamato <strong>schema fisico</strong> del database. L'utente che usa il DBMS non vedrà mai direttamente come viene organizzato lo schema fisico, ma vedrà una sua rappresentazione astratta, chiamata <strong>schema logico</strong>.</p>
<!-- DB01 (DBMS, schema logico/fisico) -->
<p class="center">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="529px" viewBox="-0.5 -0.5 529 214" style="max-width:100%;max-height:214px;"><defs/><g><path d="M 120 30 L 184.99 81.07" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 189.12 84.31 L 181.45 82.74 L 184.99 81.07 L 185.78 77.23 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="0" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 30px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">app 1</div></div></div></foreignObject><text x="60" y="34" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">app 1</text></switch></g><path d="M 120 100 L 183.77 86.33" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 188.91 85.23 L 182.8 90.12 L 183.77 86.33 L 181.33 83.28 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="70" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 100px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">app 2</div></div></div></foreignObject><text x="60" y="104" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">app 2</text></switch></g><path d="M 120 180 L 186.22 90.13" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 189.34 85.9 L 188 93.61 L 186.22 90.13 L 182.37 89.46 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="150" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 180px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">app 3</div></div></div></foreignObject><text x="60" y="184" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">app 3</text></switch></g><path d="M 280 85 L 303.63 85" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 308.88 85 L 301.88 88.5 L 303.63 85 L 301.88 81.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="190" y="60" width="90" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 85px; margin-left: 191px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">schema logico</div></div></div></foreignObject><text x="235" y="89" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">schema logico</text></switch></g><path d="M 422.5 201.67 L 422.5 158.33 C 422.5 152.35 446.01 147.5 475 147.5 C 503.99 147.5 527.5 152.35 527.5 158.33 L 527.5 201.67 C 527.5 207.65 503.99 212.5 475 212.5 C 446.01 212.5 422.5 207.65 422.5 201.67 Z" fill="#ffffff" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 422.5 158.33 C 422.5 164.32 446.01 169.17 475 169.17 C 503.99 169.17 527.5 164.32 527.5 158.33" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 103px; height: 1px; padding-top: 180px; margin-left: 424px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">files</div></div></div></foreignObject><text x="475" y="184" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">files</text></switch></g><path d="M 400 85 L 423.63 85" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 428.88 85 L 421.88 88.5 L 423.63 85 L 421.88 81.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="310" y="30" width="90" height="110" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 85px; margin-left: 311px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DBMS</div></div></div></foreignObject><text x="355" y="89" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DBMS</text></switch></g><path d="M 475 110 L 475 141.13" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 475 146.38 L 471.5 139.38 L 475 141.13 L 478.5 139.38 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="430" y="60" width="90" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 85px; margin-left: 431px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">schema fisico</div></div></div></foreignObject><text x="475" y="89" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">schema fisico</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>
</p>
<p>Lo schema fisico cambia in base alle diverse aziende che forniscono il software per la connessione tra DBMS e DB; questo pezzo di software viene chiamato <em>storage engine</em> del database. Lo storage engine che useremo è InnoDB, anch'esso di Oracle ed open-source.</p>
<p>La lista degli storage engine è visualizzabile con il comando:</p>
<pre><code class="language-sql">show storage engines;
</code></pre>
<p>che nel caso del nostro server restituisce il seguente output.</p>
<table><thead><tr><th>Engine</th><th>Support</th><th>Comment</th><th>Transactions</th><th>XA</th><th>Savepoints</th></tr></thead><tbody>
<tr><td>InnoDB</td><td>DEFAULT</td><td>Supports transactions, row-level locking, and foreign keys</td><td>YES</td><td>YES</td><td>YES</td></tr>
<tr><td>MRG_MYISAM</td><td>YES</td><td>Collection of identical MyISAM tables</td><td>NO</td><td>NO</td><td>NO</td></tr>
<tr><td>MEMORY</td><td>YES</td><td>Hash based, stored in memory, useful for temporary tables</td><td>NO</td><td>NO</td><td>NO</td></tr>
<tr><td>BLACKHOLE</td><td>YES</td><td>/dev/null storage engine (anything you write to it disappears)</td><td>NO</td><td>NO</td><td>NO</td></tr>
<tr><td>MyISAM</td><td>YES</td><td>MyISAM storage engine</td><td>NO</td><td>NO</td><td>NO</td></tr>
<tr><td>CSV</td><td>YES</td><td>CSV storage engine</td><td>NO</td><td>NO</td><td>NO</td></tr>
<tr><td>ARCHIVE</td><td>YES</td><td>Archive storage engine</td><td>NO</td><td>NO</td><td>NO</td></tr>
<tr><td>PERFORMANCE_SCHEMA</td><td>YES</td><td>Performance Schema</td><td>NO</td><td>NO</td><td>NO</td></tr>
<tr><td>FEDERATED</td><td>NO</td><td>Federated MySQL storage engine</td><td>NULL</td><td>NULL</td><td>NULL</td></tr>
</tbody></table>
<blockquote>
<p>Nota: MEMORY è un particolare storage engine che salva i dati in memoria invece che su disco. Utile per fare prove o salvare tabelle che non devono essere persistenti, ad esempio per gestire sessioni temporanee. Da notare anche che esistono dei DBMS più specifici proprio per gestire DB in memoria, il più diffuso è Redis.</p>
</blockquote>
<h1 id="mappa-concettuale"><a class="header" href="#mappa-concettuale">Mappa concettuale</a></h1>
<p>Per riassumere gli aspetti più importante dei DBMS, allego questa mappa concettuale, di cui abbiamo discusso alcuni rami a lezione.</p>
<!-- mappa concettuale  DBMS -->
<img src="assets/dbms-map.png" /><div style="break-before: page; page-break-before: always;"></div><h1 id="cheat-sheet"><a class="header" href="#cheat-sheet">Cheat Sheet</a></h1>
<h2 id="tipi-dati"><a class="header" href="#tipi-dati">Tipi dati</a></h2>
<table><thead><tr><th>Tipo</th><th align="center">Limiti</th><th align="center">Byte</th></tr></thead><tbody>
<tr><td><strong>char(</strong><em>n_caratteri</em><strong>)</strong></td><td align="center"><strong>0</strong> ≤ <em>n_caratteri</em> ≤ <strong>255</strong></td><td align="center"><strong>1-255</strong></td></tr>
<tr><td><strong>varchar(</strong><em>n_caratteri</em><strong>)</strong></td><td align="center"><strong>0</strong> ≤ <em>n_caratteri</em> ≤ <strong>255</strong></td><td align="center"><strong>1-255</strong></td></tr>
<tr><td><strong>tinyint</strong></td><td align="center"><strong>-128</strong> ≤ <em>valore</em> ≤ <strong>127</strong></td><td align="center"><strong>1</strong></td></tr>
<tr><td><strong>int</strong></td><td align="center"><strong>-2·10⁹</strong> ≤ <em>valore</em> ≤ <strong>2·10⁹</strong></td><td align="center"><strong>4</strong></td></tr>
<tr><td><strong>bigint</strong></td><td align="center"><strong>-2·10⁶³</strong> ≤ <em>valore</em> ≤ <strong>2·10⁶³</strong></td><td align="center"><strong>8</strong></td></tr>
</tbody></table>
<h2 id="nota-sulle-lettere-maiuscole-e-minuscole"><a class="header" href="#nota-sulle-lettere-maiuscole-e-minuscole">Nota sulle lettere maiuscole e minuscole</a></h2>
<p>Il linguaggio SQL non fa distinzione tra maiuscole e minuscole. Questo ha portato a diversi stili di scrittura dei comandi, tutti sintatticamente validi. </p>
<p>Chi usa le lettere maiuscole ritiene che sia più chiaro e facile distinguere le keyword dal resto dei comandi.</p>
<p>Chi usa le lettere minuscole lo ritiene più in linea con la sintassi degli attuali linguaggi di programmazione, considerando che spesso si usano degli editor che si occupano di evidenziare le parole chiavi.</p>
<p>Personalmente preferisco usare le lettere minuscole, ma se usate le maiuscole va bene lo stesso. L'importante è che presa una scelta, siate coerenti con la scelta fatta (almeno all'interno della stessa query!!).</p>
<h2 id="convenzioni-sui-nomi"><a class="header" href="#convenzioni-sui-nomi">Convenzioni sui nomi</a></h2>
<p>Seguiamo le seguenti convenzioni:</p>
<ul>
<li>per i nomi delle tabelle, usiamo il plurale (es. <code>utenti</code>)</li>
<li>se possibile, per le tabelle usare un nome collettivo (es. <code>personale</code> invece di <code>dipendenti</code>)</li>
<li>per i nomi delle colonne, usiamo il singolare (es. <code>nome</code>)</li>
<li>per le chiavi primarie, usiamo il nome della tabella al singolare seguito da <code>_id</code> (es. <code>utente_id</code>)</li>
</ul>
<h2 id="data-definition-language-ddl"><a class="header" href="#data-definition-language-ddl">Data Definition Language (DDL)</a></h2>
<p>Il Data Definition Language (DDL) è la parte del linguaggio SQL che si occupa di creare, modificare o eliminare elementi nella <em>schema logico</em> del database. In altre parole, contiene i comandi per creare o modificare databases e tabelle. Le parole chiave usate nel DDL sono:</p>
<ul>
<li><strong>create</strong> per creare elementi</li>
<li><strong>alter</strong> per modificare elementi</li>
<li><strong>drop</strong> per eliminare elementi</li>
</ul>
<h3 id=""><a class="header" href="#"></a></h3>
<p><strong>show databases;</strong><br>
<em>Elenca tutti i database del DBMS</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">show databases;
</code></pre>
</details>
<h3 id="-1"><a class="header" href="#-1"></a></h3>
<p><strong>show tables;</strong><br>
<em>Elenca tutte le tabelle nel database</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">show tables;
</code></pre>
</details>
<h3 id="-2"><a class="header" href="#-2"></a></h3>
<p><strong>show columns from</strong> <em>nome_tabella</em><strong>;</strong><br>
<em>Elenca le colonne di una tabella e le caratteristiche di ogni colonna</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">show columns from utenti;
</code></pre>
</details>
<h3 id="-3"><a class="header" href="#-3"></a></h3>
<p><strong>use</strong> <em>nome_database</em><strong>;</strong><br>
<em>Seleziona un database</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">use calendario;
</code></pre>
<pre><code class="language-sql">use bar;
</code></pre>
</details>
<h3 id="create"><a class="header" href="#create">CREATE</a></h3>
<p><strong>create table</strong> <em>nome_tabella</em> <strong>(</strong><em>nome_colonna</em> <em>tipo</em> <strong>,</strong> <em>nome_colonna2</em> <em>tipo</em><strong>);</strong><br>
<em>Crea una tabella all'interno del database</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">create table eventi (titolo varchar(255), data int);
</code></pre>
<pre><code class="language-sql">create table studenti (nome varchar(100), cognome varchar(100), eta int unsigned);
</code></pre>
</details>
<h3 id="-4"><a class="header" href="#-4"></a></h3>
<p><strong>primary key</strong><br>
<em>Indica una o più colonne che identificano in modo univoco una riga. In italiano: chiave primaria.</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">create table cittadini (codice_fiscale char(16) primary key, nome varchar(255));
</code></pre>
<pre><code class="language-sql">create table utenti (username varchar(50) primary key, password varchar(255));
</code></pre>
<pre><code class="language-sql">create table telefoni (modello char(10) primary key, disponibilita int);
</code></pre>
</details>
<h3 id="-5"><a class="header" href="#-5"></a></h3>
<p><strong>auto_increment</strong><br>
<em>Incrementa il valore di una colonna ogni volta che viene aggiunta una riga</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">create table prodotti (id int primary key auto_increment, nome varchar(255));
</code></pre>
</details>
<h3 id="-6"><a class="header" href="#-6"></a></h3>
<p><strong>foreign key</strong> <br>
<em>Crea un riferimento ad una chiave primaria di un'altra tabella. In italiano: chiave esterna.</em></p>
<p>Spesso le tabelle hanno dei riferimenti le une con le altre. Pensiamo ad esempio alle tabelle &quot;eventi&quot; e &quot;utenti&quot;. Ogni evento ha un organizzatore (uno solo), quindi vorremmo poter inserire questa informazione nel nostro database. Per fare questa operazione abbiamo bisogno di una chiave esterna.</p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">create table eventi (
    titolo varchar(100),
    evento_id int auto_increment,
    organizzatore int,
    foreign key (organizzatore) references utenti(utente_id)
);
</code></pre>
<p>Nel momento in cui si inserisce un nuovo evento, il DBMS controlla che l'organizzatore sia un utente esistente; in caso contrario rifiuta l'inserimento.</p>
</details>
<h3 id="drop"><a class="header" href="#drop">DROP</a></h3>
<p><strong>DROP TABLE</strong> <em>nome_tabella</em><strong>;</strong><br>
<em>Elimina una tabella dal database</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">drop table prodotti;
</code></pre>
<pre><code class="language-sql">drop table utenti;
</code></pre>
<pre><code class="language-sql">drop table studenti;
</code></pre>
</details>
<h3 id="alter"><a class="header" href="#alter">ALTER</a></h3>
<p><strong>alter table</strong> <em>nome_tabella</em> <strong>rename to</strong> <em>nuovo_nome_tabella</em><strong>;</strong><br>
<em>Cambia il nome di una tabella</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">alter table utenti rename studenti;
</code></pre>
<pre><code class="language-sql">alter table ata rename personale_ata ;
</code></pre>
</details>
<h3 id="rename"><a class="header" href="#rename">RENAME</a></h3>
<p><strong>rename table</strong> <em>nome_tabella</em> <strong>to</strong> <em>nuovo_nome_tabella</em><strong>,</strong> <em>nome_tabella_2</em> <strong>to</strong> <em>nuovo_nome</em> etc...<strong>;</strong><br>
<em>Cambia il nome di una o più tabelle (funziona solo in MySQL)</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">rename table utenti to professori;
</code></pre>
<pre><code class="language-sql">rename table ny_times to pubblicazioni_ny_times, the_guardian to pubblicazioni_the_guardian;
</code></pre>
</details>
<h2 id="data-manipulation-language"><a class="header" href="#data-manipulation-language">Data Manipulation Language</a></h2>
<p>Il Data Manipulation Language (DML) è la parte del linguaggio SQL che serve per modificare, aggiornare e cancellare il <em>contenuto</em> delle tabelle, senza alternarne però lo schema logico. Si compone prevalentemente di:</p>
<ul>
<li><strong>insert</strong> per inserire una nuova riga in una tabella</li>
<li><strong>update</strong> per aggiornare una o più colonne di una riga</li>
<li><strong>delete</strong> per cancellare una o più righe</li>
</ul>
<h3 id="insert"><a class="header" href="#insert">INSERT</a></h3>
<p><strong>insert into</strong> <em>nome_tabella</em> <strong>(</strong><em>nome_colonna</em>, <em>nome_colonna2...</em><strong>)</strong> <strong>values</strong> <strong>(</strong><em>valore</em>, <em>valore2...</em><strong>);</strong><br>
<em>Inserisce una riga nella tabella</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">insert into studenti (nome, cognome) values ('mario', 'rossi');
</code></pre>
<pre><code class="language-sql">insert into targhe (targa) values ('ab123cd');
</code></pre>
<pre><code class="language-sql">insert into prodotti (nome, costo, disponibilita) values ('acqua', 0.50);
</code></pre>
</details>
<h3 id="update"><a class="header" href="#update">UPDATE</a></h3>
<p><strong>update</strong> <em>nome_tabella</em> <strong>set</strong> <strong>(</strong><em>nome_colonna</em> = <em>valore</em>, <em>nome_colonna2</em> = <em>valore</em>, <em>...</em><strong>)</strong> <strong>where</strong> <em>condizione</em>;<br>
<em>modifica una riga o più righe nella tabella</em></p>
<details closed> 
<summary>esempi</summary>
<pre><code class="language-sql">update studenti set nome='claudio' where cognome='rossi';
</code></pre>
</details>
<h3 id="delete"><a class="header" href="#delete">DELETE</a></h3>
<p><strong>delete from</strong> <em>nome_tabella</em> <strong>where</strong> <em>condizione</em>;<br>
<em>elimina una o più righe nella tabella</em></p>
<details closed> 
<summary>esempi</summary>
<pre><code class="language-sql">delete from studenti where cognome='rossi';
</code></pre>
</details>
<h2 id="data-query-language"><a class="header" href="#data-query-language">Data Query Language</a></h2>
<p>Il Data Query Language (DQL) è la parte del linguaggio SQL che serve per interrogare il database. Si compone essenzialmente del comando <strong>select</strong> con tutte le sue diverse forme e clausole.</p>
<h3 id="select"><a class="header" href="#select">SELECT</a></h3>
<p><strong>select</strong> <em>nome_colonna</em>, <em>nome_colonna2...</em> <strong>from</strong> <em>nome_tabella</em><strong>;</strong><br>
<em>Seleziona (filtrando) dati da una tabella</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">select nome, cognome from dipendenti;
</code></pre>
<pre><code class="language-sql">select costo from merendine;
</code></pre>
<pre><code class="language-sql">select * from video -- &quot;*&quot; significa &quot;tutte le colonne&quot;;
</code></pre>
<p>L'asterisco (<em>star</em> in inglese) è da usare esclusivamente in fase di debug o nei rari casi in cui serva effettivamente avere tutte le colonne per eseguire qualche tipo di indagine. Nella pratica, in un'applicazione bisogna sempre selezionare le colonne che poi effettivamente saranno usate nel resto del codice, per aumentare le prestazioni ed evitare errori di vario genere.</p>
</details>
<h3 id="where"><a class="header" href="#where">WHERE</a></h3>
<p><strong>where</strong> <em>condizione</em><strong>;</strong><br>
<em>where introduce una o più condizioni per filtrare le righe</em></p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">select nome, cognome from cittadini where regione='lazio';
</code></pre>
<pre><code class="language-sql">select nome, indirizzo from hotel where costo &lt; 150.00 and stanze_libere &gt; 2;
</code></pre>
<pre><code class="language-sql">select nome, iban from libri where review between 3 and 5;
</code></pre>
</details>
<h3 id="order-by"><a class="header" href="#order-by">ORDER BY</a></h3>
<p><strong>order by</strong> <em>colonna1,colonna2,...</em> [asc|desc]<strong>;</strong><br>
*order by ordina i risultati in base ad una colonna; si possono ordinare i risultati in ordine crescente (<code>asc</code>, default) o decrescente (<code>desc</code>). si possono specificare più colonne in sequenza, in questo caso ordinerà prima per la colonna1, poi per la colonna2, etc.</p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">select nome, cognome
from cittadini
order by cognome;
</code></pre>
<pre><code class="language-sql">select nome, cognome
from cittadini
order by cognome,nome,età desc;
</code></pre>
</details>
<h3 id="join"><a class="header" href="#join">JOIN</a></h3>
<p>Finora abbiamo trattato interrogazioni con una sola tabella. Molto spesso, tuttavia, serve fare interrogazioni su più tabelle contemporaneamente. Riprendiamo l'esempio della tabella <code>eventi</code> e la tabella <code>utenti</code>, e che ogni evento abbia esattamente un organizzatore. </p>
<p>Per fare interrogazioni su più tabelle, si usa la clausola <strong>join</strong>.</p>
<p>Vediamo come si crea un'interrogazione con la join. Si comincia sempre con il comando <strong>select</strong>. Dopo aver specificato come al solito le colonne che vogliamo selezionare, usiamo:</p>
<ol>
<li>la clausola <strong>from</strong> con <strong>la tabella che contiene la chiave esterna</strong></li>
<li>quindi aggiungiamo la clausola <strong>join</strong> con <strong>la tabella a cui fa riferimento la chiave esterna</strong></li>
<li>aggiungiamo infine la keyword <strong>on</strong> con la condizione sulle chiavi che si vogliono unire</li>
</ol>
<p>Quando usiamo colonne da più tabelle, è bene specificare sempre anche la tabella quando richiamiamo una colonna, usando la notazione punto, ad esempio <code>eventi.organizzatore</code>.</p>
<blockquote>
<p>Se non ci sono conflitti tra i nomi delle colonne, non sarebbe necessario specificare la tabella; tuttavia è una buona pratica diffusa e consolidata specificare sempre la tabella.</p>
</blockquote>
<blockquote>
<p>Tecnicamente, si può partire da una qualsiasi tabella, non solo quella con le chiavi esterne. Però per convenzione partiamo da quella, in modo da darci un'ordine mentale.</p>
</blockquote>
<blockquote>
<p>Se e solo se la colonna con la chiave esterna ha lo stesso nome della colonna con la chiave primaria, posso usare la clausola <code>using</code> anziché <code>on</code>. Questo è particolarmente utile nelle tabelle associative, che vedremo in seguito.</p>
</blockquote>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">select eventi.titolo, utenti.nome, utenti.cognome
from eventi
join utenti on eventi.organizzatore=utenti.utente_id;
</code></pre>
<pre><code class="language-sql">select eventi.titolo, utenti.nome, utenti.cognome
from partecipanti
join eventi using(evento_id)
join utenti using(utente_id);
</code></pre>
</details>
<p>La clausola <code>join</code> può essere usata insieme alle clausole <code>where</code> o <code>order by</code> per filtrare ed organizzare ulteriormente i risultati.</p>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">select eventi.titolo, eventi.costo, utenti.nome, utenti.cognome
from eventi
join utenti on eventi.organizzatore=utenti.utente_id
where eventi.costo &gt; 0
order by utenti.cognome asc;
</code></pre>
</details>
<h3 id="as"><a class="header" href="#as">AS</a></h3>
<p>Come si può intuire dalle ultime query, le richieste complesse possono diventare anche molto lunghe. Per questo motivo è possibile abbreviare i nomi delle tabelle o delle colonne con il comando <code>as</code>.</p>
<p>Attenzione ad alcune cose in particolare:</p>
<ul>
<li>a volte l'alias viene utilizzato prima di essere definito, questo può sembrare contro-intuitivo ma è il comportamento normale</li>
<li>per convenzione, l'alias delle tabelle è il primo carattere della tabella; se ci dovessero essere più tabelle che iniziano con lo stesso nome, si possono usare le prime due lettere oppure un numero incrementale (es. <code>s1</code>,<code>s2</code>, etc.)</li>
</ul>
<details closed> 
<summary>Esempi</summary>
<pre><code class="language-sql">-- comando as per rinominare le tabelle
select e.titolo, e.costo, u.nome, u.cognome
from eventi as e 
join utenti as u on e.organizzatore=u.utente_id
where e.costo &gt; 0 
order by u.cognome asc;
</code></pre>
<pre><code class="language-sql">-- comando as per rinominare le colonne
-- in questo caso la tabella risultante avrà nelle colonne i nuovi nomi degli alias
select e.titolo as titolo_evento,
    u.nome as nome_organizzatore,
    u.cognome as cognome_organizzatore
from eventi as e 
join utenti as u on e.organizzatore=u.utente_id
where e.costo &gt; 0 
order by u.cognome asc;
</code></pre>
</details> 
<h1 id="drop-table-if-exists"><a class="header" href="#drop-table-if-exists">Drop table if exists</a></h1>
<p>In fase di sviluppo, può essere utile fare il drop delle tabelle e ricrearle da capo, invece di modificarle. Se si fa il drop di una tabella che non esiste, però, SQL ci ritorna un errore; questo è particolarmente fastidioso quando scriviamo uno script. Per evitare questo problema esiste il drop condizionato all'esistenza effettiva della tabella.</p>
<detail closed>
```sql
drop table if exists utenti;
```
</detail>
<h3 id="on-delete"><a class="header" href="#on-delete">On delete</a></h3>
<p>Cosa succede se cancelliamo una riga che è un riferimento in un'altra tabella? Consideriamo ad esempio che ho diversi eventi organizzati da Mario Rossi. Ad un certo punto, cancello l'utente Mario Rossi. Cosa succede a tutti gli eventi organizzati da lui?</p>
<p>Esistono varie strategie, essenzialmente:</p>
<ul>
<li>se la chiave esterna è facoltativa, si può sostituire con NULL</li>
<li>cancello la riga con la chiave esterna</li>
</ul>
<detail closed>
<pre><code class="language-sql">create table eventi (
    -- ...
    -- se viene cancellato l'organizzatore, nell'evento viene impostato a NULL
    foreign key(organizzatore) references utenti(utente_id) ON DELETE SET NULL
</code></pre>
<pre><code class="language-sql">create table eventi (
    -- ...
    -- se viene cancellato l'organizzatore, viene cancellato anche l'evento
    foreign key(organizzatore) references utenti(utente_id) ON DELETE CASCADE
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="relazioni-tra-tabelle"><a class="header" href="#relazioni-tra-tabelle">Relazioni tra tabelle</a></h1>
<p>Due tabelle possono avere dei riferimenti tra loro di tipo diverso, che affronteremo in questo capitolo.</p>
<h1 id="uno-a-uno-one-to-one"><a class="header" href="#uno-a-uno-one-to-one">Uno a uno (one-to-one)</a></h1>
<p>È il caso in cui una riga di una tabella si associa ad una ed una sola riga di un'altra tabella.</p>
<p>Questo tipo di relazione si ha di solito quando abbiamo una tabella di dettagli. Pensiamo ad esempio ad un'applicazione in cui salviamo nei database i dettagli di un utente.</p>
<pre><code class="language-sql">create table utenti (
    utente_id int primary key auto_increment,
    nome varchar(100),
    cognome varchar(100),
);
create table dettagli_utente (
    utente_id int,
    indirizzo varchar(100),
    telefono varchar(30),
    foreign key(utente_id) references utenti(utente_id)
);
</code></pre>
<p>In questo caso, ogni dettaglio si riferisce ad uno ed un solo utente, ed ogni utente ha uno es un solo dettaglio.</p>
<p>Per interrogare il database:</p>
<pre><code class="language-sql">select u.cognome,d.indirizzo
from dettagli_utente as d
join utenti as u
    using(utente_id);
</code></pre>
<p>Da notare che in questa <code>select</code> ho usato <code>using</code> anziché <code>on</code> perché le colonne con la chiave esterna e la chiave primaria avevano lo stesso nome (<code>utente_id</code>).</p>
<p>Qualcuno potrebbe pensare che la tabella <code>dettagli_utente</code> potrebbe essere fusa con la tabella <code>utenti</code>, cioè potremmo semplicemente aggiungere le colonne <code>indirizzo</code> e <code>telefono</code> ad <code>utenti</code>. Ottima osservazione! In effetti, alcune volte conviene farlo, altre volte no. Bisogna prendere in considerazione:</p>
<ul>
<li>quanto spesso utilizzo i dettagli: se li uso raramente, conviene tenerli in una tabella separata</li>
<li>quanto sono grandi le tabelle: se la tabelle sono grandi, conviene tenerle separate</li>
<li>se hanno privilegi di accesso diversi: se la tabella dettagli ha dei vincoli di accesso più stringenti (ad esempio perché contiene dei dati sensibili), conviene tenerli in una tabella separata.</li>
</ul>
<h1 id="uno-a-molti-one-to-many"><a class="header" href="#uno-a-molti-one-to-many">Uno a molti (one-to-many)</a></h1>
<p>E' il caso in cui una riga di una tabella può avere un riferimento da più righe di un'altra tabella.</p>
<p>Pensiamo al caso degli eventi e dell'organizzatore dell'evento. Ogni evento, ha uno ed un solo utente organizzatore, mentre un utente può organizzare vari eventi.</p>
<pre><code class="language-sql">create table utenti (
    utente_id int primary key auto_increment,
    nome varchar(100),
    cognome varchar(100),
)
create table eventi (
    evento_id int primary key auto_increment,
    titolo varchar(100),
    organizzatore int,
    foreign key(organizzatore) references utenti(utente_id)
)
</code></pre>
<p>Interrogazione:</p>
<pre><code class="language-sql">select e.titolo,u.cognome
from eventi as e
join utenti as u
    on e.organizzatore=u.utente_id;
</code></pre>
<h2 id="molti-a-molti-many-to-many"><a class="header" href="#molti-a-molti-many-to-many">Molti a molti (many-to-many)</a></h2>
<p>È il caso in cui una riga di una tabella può riferirsi a più righe di un'altra tabella e viceversa. </p>
<p>Pensiamo ad esempio al caso dei partecipanti ad un evento. Ogni evento può avere più eventi partecipanti, ed ogni utente può partecipare a più eventi.</p>
<p>Non esiste in SQL un modo semplice di esprimere questa relazione. Per sua natura infatti, ogni colonna può avere solo un valore, non è possibile mettere una lista di valori all'interno della colonna.</p>
<blockquote>
<p>In teoria si potrebbe avere una colonna <code>varchar</code> con all'interno più valori, ad esempio più numeri di telefono separati da virgola. Questa sarebbe una convenzione personale dello sviluppatore, non qualcosa di gestito nativamente dal database, ed è fortemente sconsigliato. In ogni caso, quando un database non ha effettivamente colonne con più valori, si dice che è in <em>prima forma normale</em>.</p>
</blockquote>
<p>Per rappresentare una relazione molti a molti dobbiamo necessariamente usare una nuova tabella, che conterrà solo chiavi esterne che fanno riferimento alle tabelle che devono essere associate. Questa tabella prende il nome di <em>tabella associativa</em> (junction table).</p>
<pre><code class="language-sql">create table utenti (
    utente_id int primary key auto_increment,
    nome varchar(100),
    cognome varchar(100),
);
create table eventi (
    evento_id int primary key auto_increment,
    titolo varchar(100),
);
create table partecipanti (
    evento_id int,
    utente_id int,
    foreign key(evento_id) references eventi(evento_id),
    foreign key(utente_id) references utenti(utente_id),
);
</code></pre>
<p>A questo punto, per poter fare un'interrogazione, dovrò mettere due <code>join</code> concatenate:</p>
<pre><code class="language-sql">select e.titolo,
        u.nome as nome_partecipante,
        u.cognome as cognome_partecipanti
from partecipanti as p
join eventi as e
    using(evento_id)
join utenti as u
    using (utente_id);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="raccolta-dei-requisiti"><a class="header" href="#raccolta-dei-requisiti">Raccolta dei requisiti</a></h1>
<p>La creazione e manutenzione di un database è qualcosa di molto complesso (soprattutto per i DB relazionali come SQL), quindi conviene bisogna fare un'attenta progettazione iniziale per ridurre al minimo le modifiche in fase esecutiva.</p>
<h2 id="colloquio-con-il-committente-customer"><a class="header" href="#colloquio-con-il-committente-customer">Colloquio con il committente (customer)</a></h2>
<p>Per cominciare a progettare il database, bisogna raccogliere prima di tutto i requisiti dagli <em>stakeholder</em>. Gli stakeholder sono &quot;chiunque c'entri&quot; con il progetto, quindi il committente, gli utenti finali, eventuali sistemisti, norme e regolamenti, etc.</p>
<p>Nel nostro caso, per semplicità, consideriamo solo il colloquio con il committente, che dal nostro punto di vista possiamo anche chiamare <em>cliente</em>.</p>
<blockquote>
<p>Nell'agile/scrum, il colloquio è un compito che svolge il Product Owner.</p>
</blockquote>
<p>Durante il colloquio, dovrete cercare di raccogliere informazioni a riguardo:</p>
<ul>
<li>cosa ci si aspetti che faccia il servizio, in poche parole</li>
<li>chi saranno gli utilizzatori del servizio (amministratori, impiegati, utenti finali, etc.)</li>
<li>quanti sono gli utenti attesi che usufruiranno del servizio, per ogni tipologia (10 utenti finali al giorno? 100? 1000? quanti impiegati?)</li>
<li>quali operazioni deve svolgere ogni tipologia utente</li>
<li>quante volte ogni tipologia di utente svolge una certa operazione (es. accesso al sito, prenotazione, like su un elemento, etc.)</li>
</ul>
<p>Diamo inoltre i seguenti suggerimenti:</p>
<ul>
<li>lasciate parlare liberamente il vostro interlocutore, non interrompetelo troppo di frequente</li>
<li>se l'interlocutore sta evidentemente divagando, riportatelo sul progetto cone delle domande su argomenti specifici di interesse</li>
<li>non fate domande troppo tecniche, siete voi che dovete saper gestire i dettagli implementativi, non lui</li>
<li>non esitate a chiedere il perché di una certa affermazione, anche se a volte la risposta può sembrare scontata, a volte non lo è</li>
</ul>
<p>Alcuni consigli su come scrivere gli appunti:</p>
<ul>
<li>usate sempre un verbo e non solo sostantivi negli appunti</li>
</ul>
<pre><code class="language-txt">lista prenotazioni --&gt; controllare lista prenotazioni
</code></pre>
<ul>
<li>cercate sempre di mettere il soggetto al verbo, soprattutto se non è ovvio</li>
</ul>
<pre><code class="language-txt">controllare lista prenotazioni --&gt; l'amministratore deve poter controllare la lista prenotazioni
</code></pre>
<ul>
<li>quando possibile cercate di mettere il perché di un certo appunto</li>
</ul>
<pre><code class="language-txt">l'amministratore deve poter controllare la lista prenotazioni --&gt; l'amministratore deve poter controllare la lista prenotazioni per fare rendicontazione giornaliera
</code></pre>
<p>In generale, cercate di prendere appunti in forma discorsiva, non come semplice elenco puntato.</p>
<p>Soprattutto se il colloquio è in presenza, si consiglia inoltre di prendere appunti su un foglio di carta, per mettere a maggior agio l'interlocutore, fare disegni e diagrammi, sottolineare o aggiungere note facilmente ad appunti già presi.</p>
<h2 id="analisi-degli-appunti"><a class="header" href="#analisi-degli-appunti">Analisi degli appunti</a></h2>
<p>Una volta raccolti gli appunti, si passa all'analisi.</p>
<p>Anche in questo caso, vediamo un metodo semplice per analizzare i dati</p>
<ul>
<li>cerchiare le parole (o metterle in grassetto se il file è digitale)</li>
<li>sottolineare i verbi</li>
<li>se necessario, farsi un dizionarietto con gli eventuali sinonimi. Ad esempio, il committente potrebbe aver parlato di &quot;cliente&quot;, &quot;ragazzo&quot;, &quot;compratore&quot; riferendosi alla stessa tipologia di utente.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="schema-concettuale-modello-e-r"><a class="header" href="#schema-concettuale-modello-e-r">Schema concettuale (modello E-R)</a></h1>
<p>A questo punto possiamo passare dagli appunti ad una raffigurazione grafica un po' più strutturata, per ragionare meglio sul progetto da realizzare.</p>
<p>Lo schema che andremo a creare si chiama <strong>schema concettuale</strong>. In questa fare siamo ancora in una descrizione ad alto livello, non dobbiamo soffermarci o preoccuparci degli aspetti tecnici.</p>
<p>Lo schema concettuale rappresenta la struttura del progetto, non si occupa delle singole <em>istanze</em> (ovvero del singolo dipendente, prenotazione, etc.)</p>
<blockquote>
<p>Esistono molte convenzioni per i diagrammi E-R. Noi ne seguiremo le stesse convenzioni del corso di Base di Dati della Sapienza (prof.ssa Tiziana Catarci, prof. Francesco Leotta). Le slide sono disponibili online.</p>
</blockquote>
<h2 id="entità"><a class="header" href="#entità">Entità</a></h2>
<p>Le entità rappresentano concetti all'interno del nostro dominio. Tipicamente, i nomi che abbiamo individuato nella fase di analisi dei requisiti diventano entità.</p>
<p>Le entità:</p>
<ul>
<li>si rappresentano attraverso dei rettangoli</li>
<li>hanno il nome al singolare</li>
<li>generalmente iniziano con le lettere maiuscole</li>
</ul>
<p><img src="./assets/entity.png" alt="Entità" /></p>
<h2 id="relazioni"><a class="header" href="#relazioni">Relazioni</a></h2>
<p>Le relazioni tra entità si rappresentano tramite rombi con all'interno un verbo.</p>
<p><img src="./assets/relation.png" alt="Relazione" /></p>
<p>All'interno del rombo ci deve essere anche una freccia che indica la direzione in cui si legge il verbo. Si devono mettere inoltre le <em>molteplicità</em> nel punto in cui la linea della relazione tocca l'entità.</p>
<p><img src="./assets/relation2.png" alt="Relazione" /></p>
<p>La molteplicità indica quante volte una certa istanza può essere coinvolta nella relazione, e si indica con una coppia di numeri tra parentesi separati da virgola, ad esempio <code>(0,1)</code> oppure <code>(1,n)</code>. Se i due numeri coincidono, si può scrivere una volta sola, ad esempio <code>(1)</code> equivale a <code>(1,1)</code>. I due numeri in questione si chiamano <strong>cardinalità</strong>, ed in particolare il primo numero è la cardinalità <em>minima</em> ed il secondo numero la cardinalità <em>massima</em>.</p>
<p>Alcune osservazioni</p>
<ul>
<li>se la cardinalità minima è 0, vuol dire che la relazione è opzionale</li>
<li>se la cardinalità minima è 1 (o più), vuol dire che la relazione è obbligatoria</li>
<li>se la cardinalità massima è un numero esatto, vuol dire che la relazione può avere al massimo quel numero di istanze</li>
<li>se cardinalità massima è <code>n</code>, vuol dire che la relazione può avere un numero indeterminato di istanze</li>
</ul>
<p>Ad esempio:
<img src="./assets/er.png" alt="ER" /></p>
<p>Le molteplicità si leggono partendo dalla relazione opposta e passando per la relazione. Di seguito alcuni esempi.</p>
<p>Relazione &quot;partecipa a&quot;, molteplicità lato evento (0,n):</p>
<ul>
<li>possono esistere utenti che non partecipano a nessun evento</li>
<li>un utente può partecipare a più eventi </li>
</ul>
<p>Relazione &quot;partecipa a&quot;, molteplicità lato utente (0,n):</p>
<ul>
<li>possono esistere eventi senza partecipanti</li>
<li>un evento può avere più partecipanti</li>
</ul>
<p>Relazione &quot;organizza&quot;, molteplicità lato utente (1):</p>
<ul>
<li>un evento deve avere un organizzatore</li>
<li>un evento è organizzato da esattamente un utente</li>
</ul>
<p>Relazione &quot;organizza&quot;, molteplicità lato evento (0,n):</p>
<ul>
<li>possono esistere utenti che non organizzano nessun evento</li>
<li>un utente può organizzare più eventi</li>
</ul>
<blockquote>
<p>Le relazioni possono collegare anche più di due entità; in questo caso però la situazione diventa un po' più complicata da leggere e gestire. In generale, se possibile meglio evitare.</p>
</blockquote>
<p>Alcune relazioni hanno molteplicità più complesse; in questo caso si aggiungono delle note sotto il diagramma per specificarle in modo discorsivo.</p>
<h2 id="attributi"><a class="header" href="#attributi">Attributi</a></h2>
<p>Sia le entità che le relazioni possono avere attributi. Gli attributi li rappresentiamo con un bastoncino che termina con una pallina:</p>
<ul>
<li>se la pallina è nera, l'attributo è una chiave primaria</li>
<li>se la pallina è bianca, è un normale attributo</li>
</ul>
<p><img src="./assets/er-full.png" alt="ER-full" /></p>
<p>Altre convenzioni da tenere a mente:</p>
<ul>
<li>se non c'è una chiave primaria naturale (es. codice fiscale), usiamo una chiave surrogata che possiamo chiamare semplicemente <code>id</code></li>
<li>non è necessario mettere come attributi le chiavi esterne, perché quelle sono già incluse all'interno delle relazioni.</li>
</ul>
<h3 id="attributi-calcolati"><a class="header" href="#attributi-calcolati">Attributi calcolati</a></h3>
<p>Alcuni valore possono essere calcolati automaticamente da altri attributi. Ad esempio, per l'entità utente potremmo avere bisogno sia della data di nascita che dell'età. In generale, conviene mettere solo un attributo, e specificare nelle note sotto al diagramma che il valore di età verrà calcolato. </p>
<p>In alcuni casi però può convenire mantenere un attributo calcolato, se questo ha dei vantaggi computazionali. Ad esempio immaginiamo un blog in cui devo visualizzare la lista di tutti i post e per ognuno il numero di like. Ogni post potrebbe venire visualizzato migliaia di volte al giorno, e potrebbe avere migliaia di like. In teoria, il numero di like è un valore calcolato come numero di istanze della relazione post ed utente, ma probabilmente conviene salvarlo come attributo ridondato, per evitare di calcolarlo ogni volta. Il problema è ovviamente che ad ogni nuovo like devo ricordarmi di aggiornare il valore dell'attributo.</p>
<h2 id="scelta-tra-entità-relazione-e-attributo"><a class="header" href="#scelta-tra-entità-relazione-e-attributo">Scelta tra entità, relazione e attributo</a></h2>
<p>A volta può sorgere il dubbio se &quot;qualcosa&quot; sia meglio rappresentarlo come entità e relazione. Immaginiamo ad esempio un utente che prenota un'acconciatura dal parrucchiere. Il concetto di &quot;prenotazione&quot; è un entità a sé stante o una relazione tra utente ed acconciatura?</p>
<p>Altre volte può sorgere il dubbio se qualcosa è un'entità indipendente o solo un attributo. Ad esempio, la città dove vive l'utente, posso rappresentarla solo come un attributo o deve essere un'entità separata?</p>
<p>Non c'è una risposta corretta ed una sbagliata, ma possiamo tenere in mente le seguenti cose:</p>
<ul>
<li>se qualcosa ha un significato indipendente dal resto del modello, allora probabilmente è un'entità</li>
<li>se qualcosa ha senso solo in relazione ad altre entità, allora probabilmente è una relazione</li>
<li>come regola a spanne, se una relazione comincia ad avere molti attributi, probabilmente dovrebbe essere un'entità</li>
<li>se un attributo è dipendente dagli altri attributi, allora potrebbe essere utile fare un'entità separata (es. città e regione sono dipendenti tra loro)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="schema-logico"><a class="header" href="#schema-logico">Schema logico</a></h1>
<p>Una volta che siamo soddisfatti con lo schema concettuale, possiamo passare a convertirlo nello schema logico che poi potrà essere implementato nel DBMS.</p>
<p>Per fare questo passaggio, ci sono alcune regole che dobbiamo seguire.</p>
<h2 id="entità-ed-attributi"><a class="header" href="#entità-ed-attributi">Entità ed attributi</a></h2>
<p>Per le entità valgono le seguenti regole:</p>
<ul>
<li>ogni entità diventa una tabella</li>
<li>le tabelle si rappresentano con la sintassi <code>nometabella(lista attributi)</code></li>
<li>il nome dell'entità diventa il nome della tabella, <em>convertito al plurale</em> e con la lettera minuscola (es. Utente diventa utenti)</li>
<li>ogni attributo dell'entità diventa un'attributo della tabella</li>
<li>se la chiave primaria è <code>id</code>, si aggiunge il nome della tabella al singolare, ad esempio <code>id_utente</code></li>
<li>le chiavi primarie sono <ins>sottolineate</ins></li>
</ul>
<p>Riprendendo l'esempio del capitolo precedente:</p>
<ul>
<li>utenti(<ins>id_utente</ins>,nome,cognome)</li>
<li>eventi(<ins>id_evento</ins>,titolo, costo)</li>
</ul>
<p>Queste tabelle ancora non sono complete perché mancano le chiavi esterne, che vedremo nel prossimo paragrafo.</p>
<h2 id="relazioni-1"><a class="header" href="#relazioni-1">Relazioni</a></h2>
<p>Per le relazioni valgono le seguenti regole:</p>
<ul>
<li>per le relazioni uno a molti si aggiunge una chiave esterna nel lato &quot;uno&quot; della relazione</li>
<li>per le relazioni molti a molti, si crea una nuova tabella associativa, che contiene come attributi le chiavi esterne verso le due relazioni; bisogna anche aggiungere un vincolo di unicità della coppia di chiavi esterne</li>
<li>per le relazioni uno a uno si può procedere in diversi modi:
<ul>
<li>le due tabelle possono diventare un'unica tabella che contiene tutti gli attributi</li>
<li>se non si vuole creare un'unica tabella, si procede come nel caso delle relazioni uno a molti, scegliendo come entità che ha la chiave esterna quella più dipendente dall'altra (es. dettagli_utente dipende concettualmente da utente e quindi andrà a contenere la chiave esterna)</li>
</ul>
</li>
<li>per le chiavi esterne si usa il <em>corsivo</em></li>
</ul>
<p>Completando l'esempio di prima, la relazione è n-n, quindi aggiungo una tabella associativa in cui la coppia:</p>
<ul>
<li>utenti(<ins>id_utente</ins>, nome, cognome)</li>
<li>eventi(<ins>id_evento</ins>, titolo, costo, <em>organizzatore</em>)</li>
<li>partecipanti(<em><ins>id_utente</ins></em>, <em><ins>id_evento</ins></em>)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mvc"><a class="header" href="#mvc">MVC</a></h1>
<p>Nel nostro progetto useremo il framework MVC (Model-View-Controller) con PHP per creare il nostro sito web.</p>
<p>Per maggiori informazioni su questa sezione visitare la <a href="https://github.com/sebastianomelita/mvcphp/">documentazione</a> su GitHub del prof. Melita.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rest-api"><a class="header" href="#rest-api">REST API</a></h1>
<p>La parola &quot;API&quot; (Application Program Interface) è riferita al generico concetto di <em>definizione</em> un'interfaccia tra due applicazioni software. Nell'ambito web, le API sono particolarmente importanti perché definiscono il modo con cui client e server comunicano tra di loro. Delle API definite bene, permettono di dividere in modo proficuo il lavoro tra gli sviluppatori front-end e back-end, facilitano l'integrazioni di servizi di terze parti, la scalabilità e la manutenibilità del codice, etc.</p>
<p>Esistono diversi approcci per definire delle API. L'approccio web attualmente più usato si chiama &quot;REST&quot; ed è quello che analizzeremo in questo corso.</p>
<blockquote>
<p>Un alternativa alle REST API sono le <a href="https://it.wikipedia.org/wiki/SOAP">SOAP API</a>, in cui uso sempre uno stesso URL e la specifica risorsa viene selezionata all'interno del body della richiesta HTTP attraverso un documento XML. Questo tipo di approccio però non si coniuga bene con il funzionamento dei browser e del web in generale, rendendo impossibile ad esempio creare bookmarks, condividere link o navigare indietro nella cronologia delle pagine visitate. In generale quindi, se non ci sono esigenze particolari, è sempre consigliato usare il paradigma REST.</p>
</blockquote>
<h2 id="caratteristiche-distintive-delle-rest-api"><a class="header" href="#caratteristiche-distintive-delle-rest-api">Caratteristiche distintive delle REST API</a></h2>
<p>REST è l'acronimo di <a href="https://it.wikipedia.org/wiki/Representational_state_transfer">Representational State Transfer</a>. Proposto per la prima volta nel 2000 da Roy Fielding (USA), prevede i seguenti concetti fondamentali:</p>
<ul>
<li>Risorse con URL auto-descrittivi</li>
</ul>
<p>Gli URL devono essere il più possibile chiari per l'utente e contenere le informazioni necessarie al server per processare la richiesta. Ad esempio, dall'URL <code>https://en.wikipedia.org/wiki/Representational_state_transfer#Uniform_interface</code> è chiaro cosa sto chiedendo al server, anche senza dover cliccare sul link stesso.</p>
<ul>
<li>Utilizzo esplicito dei metodi HTTP</li>
</ul>
<p>Ogni risorsa (URL) può essere associato ad azioni diverse usando metodi HTTP diversi. Ad esempio, usando il metodo <code>GET</code> posso leggere una risorsa, con <code>PUT</code> posso modificarla, con <code>DELETE</code> posso cancellarla, etc.</p>
<ul>
<li>Comunicazione senza stato</li>
</ul>
<p>La comunicazione senza stato (<em>stateless</em>) è qualcosa che pervade il web e forse è uno dei suoi tratti più caratteristici e di successo. In pratica, significa che ogni richiesta è indipendente dalle altre e il server non tiene traccia direttamente della successione delle chiamate. Un'associazione tra queste può essere fatto indirettamente tramite cookies o chiavi di sessione, ma il server non tiene aperto un thread, processo o canale tra una chiamata HTTP e la successiva.</p>
<h2 id="rest--mvc"><a class="header" href="#rest--mvc">REST &amp; MVC</a></h2>
<p>Lato server, ogni richiesta HTTP è associata ad un azione (cioè un metodo o una funzione). Le azioni sono richiamabili direttamente nella barra degli indirizzi del browser o indirettamente da una ancora in un link. I parametri che vengono passati alla funzione sono anch’essi nella forma analoga a quella degli altri path, cioè un elenco di parametri separati da <code>/</code> oppure alla fine del path dopo il <code>?</code>. Ad es. <code>calcolatrice/somma/3/4/</code> (oppure <code>calcolatrice/somma?a=3&amp;b=4</code>) esegue la somma di due numeri forniti come parametro. L'abbinamento tra HTTP e azione avviene nel &quot;routing&quot; dell'applicazione, nel nostro caso in <code>index.php</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operazioni-rest"><a class="header" href="#operazioni-rest">Operazioni REST</a></h1>
<p>Lato server, le operazioni REST sono solitamente associate ad operazioni che avvengono all'interno di un database.</p>
<p>Ricordiamo che, quando interagiamo con un qualsiasi database, i diversi comandi rientrano all'interno delle operazioni cosiddette <strong>CRUD</strong>: <strong>C</strong>reate, <strong>R</strong>ead, <strong>U</strong>pdate e <strong>D</strong>elete.</p>
<p>I database SQL e le chiamate HTTP usano strategie diverse per eseguire queste operazioni. Di seguito una tabella riassuntiva di confronto.</p>
<table><thead><tr><th>Operazione</th><th>SQL</th><th>HTTP/REST</th></tr></thead><tbody>
<tr><td>Create</td><td>INSERT</td><td>POST (o PUT)</td></tr>
<tr><td>Read</td><td>SELECT</td><td>GET</td></tr>
<tr><td>Update</td><td>UPDATE</td><td>PUT / PATCH</td></tr>
<tr><td>Delete</td><td>DELETE</td><td>DELETE</td></tr>
</tbody></table>
<p>Di seguito vediamo in dettaglio alcune operazioni HTTP/REST. </p>
<p>Ricordiamo anche che, per effettuare una qualsiasi operazione, bisogna preliminarmente identificare <strong>l'URL</strong> della risorsa, ad esempio <code>/users/27</code> oppure <code>/events</code>. Per identificare la risorsa, è necessario consultare la documentazione delle API.</p>
<h2 id="selezione-della-risorsa"><a class="header" href="#selezione-della-risorsa">Selezione della risorsa</a></h2>
<p>Per leggere il valore di una risorsa, usiamo l'URL della risorsa stessa ed effettuiamo la richiesta HTTP con il metodo GET. Ci si aspetta che il database non cambi stato dopo questa chiamata.</p>
<blockquote>
<p>Eccezioni a questa regola potrebbero essere quando vogliamo salvare alcune informazioni di analisi d'utilizzo del sito, In questo caso, una chiamata GET aumenterà comunque un contatore di visite, modificando di fatto lo stato del server.</p>
</blockquote>
<h2 id="modifica-di-una-risorsa"><a class="header" href="#modifica-di-una-risorsa">Modifica di una risorsa</a></h2>
<p>Per modificare la risorsa <code>POST</code> e <code>PUT</code> in base al tipo di operazione che vogliamo eseguire. <code>POST</code> di solito si usa quando voglio creare una nuova risorsa, mentre <code>PUT</code> quando la voglio modificare. In realtà, la distinzione tra questi due metodi è più sottile, come mostrato di seguito.</p>
<h3 id="idempotenza"><a class="header" href="#idempotenza">Idempotenza</a></h3>
<p>Per capire bene la differenza tra <code>POST</code> e <code>PUT</code>, dobbiamo introdurre il concetto di idempotenza. Un comando si chiama <em>idempotente</em> se &quot;<em>richieste ripetute identiche devono portare al medesimo stato dei dati sul server</em>&quot;. Pensate ad esempio ad una <code>UPDATE</code> in SQL. Se chiamate più volte UPDATE con gli stessi parametri, le chiamate successive alla prima non avranno effetto sulla riga da aggiornare. Pensate ora alla INSERT. Se chiamate più volte INSERT con gli stessi parametri, ipotizzando un'assegnazione automatica della chiave primaria, ad ogni chiamata il database andrà ad aggiungere una nuova riga.</p>
<p>La stessa cosa per le chiamate HTTP.</p>
<p><code>PUT</code> è idempotente: facendo più richieste identiche, il DB viene modificato solo la prima volta.</p>
<p><code>POST</code> non è idempotente: facendo più richieste identiche, ad ogni chiamata verrà aggiunta una nuova risorsa e creata una chiave primaria per noi.</p>
<p>Nella pratica, questo significa che quando uso <code>PUT</code> devo passare anche la chiave primaria dell'elemento da creare o aggiornare, mentre con <code>POST</code> non devo fornire la chiave primaria, perché verrà creata dal server.</p>
<p>Approfondimento sul concetto di idempotenza <a href="http://blog.loris.tissino.it/2013/06/http-rest-e-api.html">qui</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tools"><a class="header" href="#tools">Tools</a></h1>
<p>Per definire e testare le REST API, ci sono diversi strumenti molto utili, di seguito ne descriviamo un paio.</p>
<h2 id="postman"><a class="header" href="#postman">Postman</a></h2>
<p><a href="https://www.postman.com/">Postman</a> è una piattaforma pensata principalmente per il test di un server già esistente. Fornisce moltissimi strumenti per automatizzare i test, dando la possibilità di creare anche scenari complessi con diversi variabili ambientali. </p>
<img class="w100p" title="postman" alt="postman screenshot" src="assets/postman.png">
<p>Fornisce anche la possibilità di creare automaticamente la documentazione, oppure di fare il design di nuove API. </p>
<p>Si interfaccia in modo molto fluido con Swagger: è possibile importare facilmente o addirittura sincronizzare nel tempo un progetto Swagger dentro Postman.</p>
<h2 id="swagger"><a class="header" href="#swagger">Swagger</a></h2>
<p><a href="https://swagger.io/">Swagger</a> è pensato principalmente per fare il design delle REST API. Attraverso un file in formato <code>.yaml</code>, è possibile descrivere accuratamente come dovrà funzionare il nostro server, ancora prima di averlo creato.</p>
<img class="w100p" title="swagger" alt="swagger screenshot" src="assets/swagger.png">
<p>Swagger da la possibilità di creare un server di mockup che genera le risposte alle chiamate HTTP esattamente come sono state definite.</p>
<p>Anche Swagger ha una funzionalità che si chiama <a href="https://swagger.io/tools/swagger-inspector/">Inspector</a> che permette di fare il test delle API su un server esistente. In questo caso, è richiesto che all'interno del server da testare sia presente un file <code>swagger.json</code> con la definizione delle chiamate fornite dal server stesso. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cloud"><a class="header" href="#cloud">Cloud</a></h1>
<p>In questo capitolo ci occuperemo di capire come funziona il cloud. Useremo AWS come piattaforma. Useremo anche docker per installare facilmente appliacazioni nella nostra macchina virtuale.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cloud-tutorial"><a class="header" href="#cloud-tutorial">Cloud tutorial</a></h1>
<p>Per il tutorial useremo AWS Academy che non richiede una carta di credito per fare l'account. Dovrete usare il vostro indirizzo email della scuola</p>
<h2 id="login"><a class="header" href="#login">Login</a></h2>
<p>Andare su <a href="https://www.awsacademy.com/SiteLogin">AWS Academy</a> e fare il login. </p>
<p>Tra i corsi disponibili, andare su &quot;AWS Academy Learner Lab&quot;, quindi su Moduli -&gt; Learner Lab Foundational Services -&gt; Start Lab.</p>
<p>Aspettare qualche secondo che il pallino vicino ad AWS da rosso diventi verde, quindi cliccarci sopra.</p>
<p>Importante: ricordarsi sempre di chiudere la sessione del laboratorio quando si ha finito con gli esercizi, per non sprecare credito. Si consiglia anche di interromprere tutti i servizi (EC2, database, etc), perché non tutti vengono chiusi automaticamente.</p>
<p>Ricordatevi di rimanere sempre in Virginia Settentrionale, altrimenti il vostro credito <em>non</em> funzionerà.</p>
<h2 id="creare-unistanza"><a class="header" href="#creare-unistanza">Creare un'istanza</a></h2>
<p>Ora vi ritrovate in una console reale di AWS!</p>
<p>Dalla lista dei servizi in alto, selezionate EC2. Nella pagina che si apre, selezionate il bottone arancione per lanciare una nuova istanza. Lasciate tutto di default: Linux Amazon 2 AMI su x86 a 64bit, e t2.micro.</p>
<p>Alla fine del processo, quando richiesto, usare la chiave vockey.pem. La chiave può essere scaricata in qualsiasi momento dal sito di AWS Academy andando su &quot;AWS Details&quot;, vicino al bottone &quot;Start Lab&quot; che abbiamo premuto prima. Si consiglia di rinominare subito la chiave appena scaricata in <code>vockey.pem</code>, per semplificare le operazioni successive.</p>
<p>Non chiudere la finestra della dashboard, ci servirà in seguito.</p>
<p><strong>CHECKPOINT</strong>
Controllare sulla dashboard che l'istanza sia &quot;running&quot;.</p>
<p class="centered img-container">
<img class="centered w80p" title="EC2 running" alt="EC2 running" src="assets/ec2-running.png">
</p>
<h2 id="accedere-allistanza-da-terminale"><a class="header" href="#accedere-allistanza-da-terminale">Accedere all'istanza da terminale</a></h2>
<p>Dal vostro computer, aprite il vostro terminale preferito, navigate nella cartella in cui si trova la chiave scaricata.</p>
<p>Dalla console di AWS, selezionate l'istanza a cui volete connettervi, quindi andate in alto cliccate su &quot;Connect&quot;. Selezionate la tab &quot;SSH client&quot;. Solo la prima volta che avete scaricato la chiave, selezionate il comando al punto 3 <code>chmod...</code> per cambiare i permessi della chiave. Quindi selezionate il comando nell'esempio <code>ssh -i...</code> ed incollatelo nel vostro terminale.</p>
<p>Se tutto è andato a buon fine, dovreste esservi collegati all'istanza.</p>
<blockquote>
<p>La prima volta vi chiederà conferma del fingerprint, scrivete yes e premete invio.</p>
</blockquote>
<h2 id="configurare-listanza-al-primo-avvio"><a class="header" href="#configurare-listanza-al-primo-avvio">Configurare l'istanza al primo avvio</a></h2>
<p>Ora che siamo riusciti a connetterci l'istanza, dobbiamo configurarla per i nostri scopi.</p>
<p>Quello che andiamo a fare, è installare sulla macchina remota gli eseguibili che ci serviranno per completare il progetto:</p>
<ul>
<li>docker</li>
<li>docker-compose</li>
<li>git</li>
</ul>
<p>Per configurare l'istanza, la prima volta copiate i seguenti comandi.</p>
<p>Suggerimento: nel riquadro qui sotto, in alto a destra trovate l'icona delle pagine per copiare tutti i comandi in una volta sola.</p>
<pre><code class="language-sh">sudo yum update -y

# install docker
sudo yum install docker -y
# add docker to the admin group, so we can use it without sudo
sudo groupadd docker
sudo usermod -aG docker $USER
# add docker to startup services
sudo chkconfig docker on
sudo systemctl enable docker
# install docker-compose
sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
# install git
sudo yum install git -y
</code></pre>
<p>Disconnettersi dalla macchina scrivendo <code>exit</code> o premendo <code>ctrl-d</code> e riconnettetevi. Controllate che sia andato tutto a buon fine con i seguenti comandi:</p>
<pre><code class="language-sh">docker --version
docker-compose --version
git --version
</code></pre>
<p class="centered img-container">
<img class="centered w80p" title="Remote-SSH" alt="Remote-SSH" src="assets/remote-versions.png">
</p>
<h1 id="docker-le-basi"><a class="header" href="#docker-le-basi">Docker: le basi</a></h1>
<p>Docker è una piattaforma che permette di creare, testare e distribuire applicazioni velocemente. Raccoglie il software in unità standardizzate chiamate &quot;container&quot; che contengono tutto il necessario per la loro corretta esecuzione, incluse librerie, strumenti di sistema, codice e runtime.</p>
<p class="centered img-container">
<img class="centered w80p" title="Docker" alt="Docker" src="https://d1.awsstatic.com/Developer%20Marketing/containers/monolith_2-VM-vs-Containers.78f841efba175556d82f64d1779eb8b725de398d.png">
</p>
<p>I <em>container</em> sono delle <em>immagini</em> in esecuzione. Per avviare un container quindi dobbiamo prima avere la relativa immagine. Controlliamo le immagini nella nostra macchina con il seguente comando:</p>
<p><strong>Checkpoint</strong>
Eseguite il seguente comando:</p>
<pre><code class="language-sh">docker image list
</code></pre>
<p>e controllate di avere un output del genere:</p>
<p class="centered img-container">
<img class="centered w80p" title="Remote-SSH" alt="Remote-SSH" src="assets/remote-docker-list.png">
</p>
<blockquote>
<p>Se una volta ricollegati alla macchina remota, il comando docker image list non dovesse funzionare, lanciate il comando <code>sudo systemctl start docker</code> e riprovate.</p>
</blockquote>
<p>Per scaricare immagini e lanciare container, useremo lo script <code>docker-compose</code>.</p>
<h2 id="creare-il-file-stackyml-per-docker-compose"><a class="header" href="#creare-il-file-stackyml-per-docker-compose">Creare il file stack.yml per docker compose</a></h2>
<p>Creiamo una cartella <code>barbiere</code> dove metteremo i nostri file di progetto.</p>
<pre><code class="language-sh">mkdir barbiere
cd barbiere
</code></pre>
<p>Creiamo il file <code>stack.yml</code>.</p>
<pre><code class="language-sh">nano stack.yml
</code></pre>
<p>A questo punto, inseriamo il codice che ci serve per scaricare ed avviare un database, ad esempio <code>mariadb</code>.</p>
<pre><code class="language-yaml">version: '3.1'

services:
  db:
    image: mariadb
    restart: always
    environment:
      MARIADB_ROOT_PASSWORD: example
</code></pre>
<p>Con queste righe, sto dicendo di creare un nuovo <em>servizio</em>, che chiamo <code>db</code>, l'immagine di partenza è <code>mariadb</code>, al riavvio di docker si deve sempre rilanciare e ha come variabile d'ambiente quella specificata.</p>
<blockquote>
<p>L'immagine mariadb viene scaricata dall'hub ufficiale di docker, <a href="hub.docker.com">hub.docker.com</a>.</p>
</blockquote>
<p>Per avviare la stack, usiamo il seguente comando.</p>
<pre><code class="language-sh">docker-compose -f stack.yml up
</code></pre>
<p>Se tutto va bene, dovreste alla fine vedere qualcosa del genere.</p>
<pre><code class="language-sh">Creating barbiere_db_1 ... done
Attaching to barbiere_db_1
db_1  | 2022-03-22 07:22:51+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.7.3+maria~focal started.
...
db_1  | 2022-03-22  7:22:58 0 [Note] InnoDB: Buffer pool(s) load completed at 220322  7:22:58
</code></pre>
<p>Il nostro server è up! Ma come facciamo ad interrogarlo? Installiamo un pannello di amministrazione. Useremo <em>Adminer</em>, che è la nuova versione di phpMyAdmin.</p>
<p>Aggiungiamo a <code>stack.yml</code> un nuovo servizio:</p>
<pre><code class="language-yml">  adminer:
    image: adminer
    restart: always
    ports:
      - 8080:8080
</code></pre>
<p>L'ultima proprietà, <code>ports</code>, dice che la porta 8080 nella macchina AWS (host, a sinistra dei due punti) deve corrispondere alla porta 8080 del container (a sinistra dei due punti).</p>
<p>Per rendere la configurazione operativa, interrompere docker-compose con CTRL-C e rilanciare il comando.</p>
<p>Prima di provare ad accedere, però, devo ricordarmi di aprire la porta 8080 su AWS. Per fare questo, selezionare la macchina sulla console, selezionare in basso la tab Security, cliccare sul link nella sezione &quot;Security Groups&quot;, quindi in &quot;Inbound Rules&quot; selezionare &quot;Edit inbound rules&quot; -&gt; &quot;Add rule&quot;, come type lasciare Custom, come Port range inserire 8080 e come Source selezionare &quot;Anywhere IPv4&quot;. Salvare.</p>
<p>Ora possiamo aprire un browser alla porta 8080 e controllare. Per l'indirizzo, dobbiamo tornare sulla console AWS, selezionare la macchina ed in basso trovare la voce &quot;Public DNS&quot;. Copiare il dns e ricordarsi di aggiungere alla fine <code>:8080</code>.</p>
<blockquote>
<p>Nota: il nostro sito non ha certificati, quindi assicurarsi sempre di usare http e non https.</p>
</blockquote>
<p class="centered img-container">
<img class="centered w80p" title="Adminer" alt="Adminer" src="assets/adminer.png">
</p>
<p>Inserire come nome utente <code>root</code> e come password quella inserita nel file <code>stack.yml</code>.</p>
<h2 id="configurare-il-web-server-e-php"><a class="header" href="#configurare-il-web-server-e-php">Configurare il web server e PHP</a></h2>
<p>Ora passiamo ad installare un web server con il supporto PHP.</p>
<p>Per il web server useremo <a href="https://www.nginx.com/">Nginx</a>, che rispetto al rivale Apache è più piccolo e leggero e quindi adatto al nostro contesto.</p>
<p>Per il PHP, non installeremo direttamente l'interprete sulla macchina del web server, ma creeremo un container dedicato. Metteremo i due container in comunicazione attraverso una tecnica che si chiama &quot;FastCGI&quot;, che permette a più applicazioni di comunicare tra di loro attraverso la rete.</p>
<p>Aggiungiamo quindi i servizi necessari:</p>
<pre><code class="language-yml">  webserver:
    image: nginx
    volumes:
      - ./code:/code
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
    ports:
      - 80:80

  php:
    image: php:fpm
    volumes:
      - ./code:/code
</code></pre>
<p>In questo snippet vediamo un'altra proprietà fondamentale di docker: la proprietà <code>volumes</code>. Ci serve per mappare una cartella sulla macchina host (sempre a sinistra dei due punti) in una cartella nel container.</p>
<p>In particolare, qui stiamo dicendo che la cartella che conterrà il codice è <code>./code</code> nella macchina host e <code>/code</code> nel container. Per configurare i container in modo da cercare il codice da servire in <code>/code</code> (che non è la cartella di default) e per far funzionare l'interprete PHP, dobbiamo modificare il file di configurazione del web server attraverso il file <code>nginx.conf</code>.</p>
<p>Creiamo quindi questo file e riempiamolo in questo modo:</p>
<pre><code class="language-conf">server {
    listen 80;
    index index.php index.html;
    server_name localhost;
    error_log  /var/log/nginx/error.log;
    access_log /var/log/nginx/access.log;
    root /code;

    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass php:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
    }
}
</code></pre>
<p>Osserviamo in particolare 2 righe:</p>
<ul>
<li><code>root /code;</code> ci dice dove si trova il codice da servire</li>
<li><code>fastcgi_pass php:9000;</code> ci dice dove si trova l'interprete php; notare che &quot;php&quot; è il nome dns automaticamente assegnato da docker al servizio php, in quanto è il proprio il nome del servizio!</li>
</ul>
<blockquote>
<p>Tutti i container in una stack docker sono messi in rete tra di loro, per raggiungersi tra di loro si usa il dns interno che crea dei nomi identici al nome del servizio.</p>
</blockquote>
<p>Prima di provare ad accedere al web server, ricordiamoci di aprire anche la porta 80 sulla nostra macchina AWS, come visto in precedenza.</p>
<h2 id="creazione-di-un-file-di-prova"><a class="header" href="#creazione-di-un-file-di-prova">Creazione di un file di prova</a></h2>
<p>A questo punto ci manca solo di fare un file di prova.</p>
<p>Creiamo dentro <code>./code</code> un <code>index.php</code> di esempio:</p>
<pre><code class="language-php">&lt;?php echo &quot;Ciao sono un file PHP!&quot;;

$servername = &quot;db&quot;;
$username = &quot;root&quot;;
$password = &quot;example&quot;;

// Create connection
$conn = new mysqli($servername, $username, $password);

// Check connection
if ($conn-&gt;connect_error) {
  die(&quot;Connection failed: &quot; . $conn-&gt;connect_error);
}
echo &quot;Connected successfully&quot;;

?&gt;
</code></pre>
<p>Anche in questo caso, come servername abbiamo usato il nome del servizio del db. Configurare la password secondo le proprie esigenze, in accordo con il file stack.yml.</p>
<p>A questo punto, se aprendo il browser trovate &quot;Connected successfully&quot;, tutto è andato a buon fine!</p>
<blockquote>
<p>Ricordatevi sempre di riavviare docker-compose dopo aver modificato il file stack.yml!</p>
</blockquote>
<h2 id="riepilogo"><a class="header" href="#riepilogo">Riepilogo</a></h2>
<p>Rivediamo cosa abbiamo fatto.</p>
<ul>
<li>abbiamo creato una macchina virtuale sul cloud con Amazon Web Services</li>
<li>ci siamo connessi all'istanza con un terminale SSH</li>
<li>abbiamo configurato l'istanza con i comandi che ci servivano, in particolare <code>docker</code>, <code>docker-compose</code> e <code>git</code></li>
<li>abbiamo creato un progetto template</li>
<li>docker si è scaricato le dipendenze del nostro progetto template (<code>nginx</code>,<code>PHP</code>, <code>MySQL</code>, <code>PHP MyAdmin</code>)</li>
<li>abbiamo aperto le porte necessarie nella nostra macchina remota</li>
<li>la webapp è pronta all'uso</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
